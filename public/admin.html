<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kent Invest — Admin</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg admin-body">
  <header class="admin-header">
    <div class="admin-brand">
      <img src="/assets/Kent_Invest_Logo.png" class="brandlogo" alt="Kent Invest" />
      <div>
        <h1>Portfolio Sim Admin</h1>
        <p class="muted">Event controls + fair value monitoring</p>
        <p id="adminScenarioLabel" class="muted">Scenario: loading…</p>
      </div>
    </div>
    <div class="admin-status-stack">
      <span id="adminTickBadge" class="pill hud-pill">Tick: 0 / 4320</span>
      <span id="adminPhaseBadge" class="pill hud-pill">Phase: loading</span>
      <a class="leaderboard-link" href="/leaderboard" target="_blank" rel="noopener">Open Leaderboard</a>
    </div>
  </header>

  <main class="admin-grid">
    <section id="adminMain" class="span-3">
      <div class="admin-grid">
        <section class="panel">
          <div class="panel-header"><h2>Event Controls</h2></div>
          <div class="panel-body">
            <div class="form-row form-row-qty">
              <label for="scenarioSelect">Scenario</label>
              <select id="scenarioSelect"></select>
            </div>
            <div class="control-row">
              <button id="startBtn">Start</button>
              <button id="pauseBtn" class="secondary">Pause</button>
              <button id="endBtn" class="danger">End</button>
            </div>
            <p id="controlStatus" class="muted">Choose a scenario, then start/pause/end the simulation.</p>
          </div>
        </section>

        <section class="panel span-3">
          <div class="panel-header"><h2>Players (live)</h2></div>
          <div class="admin-player-grid">
            <div class="admin-player-table-wrap">
              <table>
                <thead>
                  <tr><th>Player</th><th>% Invested</th><th>Current PnL</th></tr>
                </thead>
                <tbody id="playersTbody"></tbody>
              </table>
            </div>
            <div class="portfolio-body admin-portfolio-body">
              <canvas id="adminPortfolioPie" class="portfolio-pie" width="320" height="200"></canvas>
              <p id="adminPortfolioPieDetails" class="muted">Select a player to inspect portfolio allocation.</p>
              <p id="adminPortfolioPieTotals" class="muted">Commodities: 0.00% · Equities: 0.00%</p>
            </div>
          </div>
        </section>

        <section class="panel">
          <div class="panel-header"><h2>Assets</h2></div>
          <div id="adminAssetTabs" class="asset-tabs"></div>
          <div class="assets-header">
            <span>Ticker</span><span>Price</span><span></span><span>Fair Value</span>
          </div>
          <div id="adminAssetsList" class="assets-list"></div>
        </section>

        <section class="panel span-2">
          <div class="panel-header">
            <h2>Asset price chart (candles) with fair value overlay</h2>
            <span id="selectedAssetLabel" class="muted">Select an asset</span>
          </div>
          <div class="chart-wrap admin-chart-wrap">
            <div id="adminChart" class="chart-surface"></div>
          </div>
        </section>

        <section class="panel span-3 admin-news-panel">
          <div class="panel-header">
            <h2>Admin news timeline</h2>
            <span class="muted">All releases in tick order · outline key below</span>
          </div>
          <div class="admin-news-key muted">
            <span class="key-item"><span class="key-swatch impact-low"></span>Low impact</span>
            <span class="key-item"><span class="key-swatch impact-light"></span>Light impact</span>
            <span class="key-item"><span class="key-swatch impact-medium"></span>Medium impact</span>
            <span class="key-item"><span class="key-swatch impact-high"></span>High impact</span>
            <span class="key-item"><span class="key-swatch released"></span>Released</span>
          </div>
          <div id="adminNewsFeed" class="admin-news-feed"></div>
        </section>
      </div>
    </section>
  </main>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/app-config.js"></script>
  <script src="https://unpkg.com/lightweight-charts@4.2.1/dist/lightweight-charts.standalone.production.js"></script>
  <script type="module" src="admin.js"></script>
</body>
</html>
